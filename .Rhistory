library(dplyr)
?mtcars
data01 = mtcars %>%
tibble::rownames_to_column('car_model') %>%
tibble::as_tibble()
data01
data01 %>%
filter(cyl >= 6) %>%
mutate(lp100 = 235.2146 / mpg ) %>%
summarise(
mean_weight = mean(wt),
mean_lp100 = mean(lp100),
)
library(dplyr)
?iris
data_iris = as_tibble(iris)
data_iris
(desc(big_cnt))
data_iris %>%
group_by(Species) %>%
mutate(big_sl = case_when(
Sepal.Length > mean(Sepal.Length) + sd(Sepal.Length) ~ TRUE,
Sepal.Length <= mean(Sepal.Length) + sd(Sepal.Length) ~ FALSE
),
big_sw = case_when(
Sepal.Width > mean(Sepal.Width) + sd(Sepal.Width) ~ TRUE,
Sepal.Width <= mean(Sepal.Width) + sd(Sepal.Width) ~ FALSE
),
big_pl = case_when(
Petal.Length > mean(Petal.Length) + sd(Petal.Length) ~ TRUE,
Petal.Length <= mean(Petal.Length) + sd(Petal.Length) ~ FALSE
),
big_pw = case_when(
Petal.Width > mean(Petal.Width) + sd(Petal.Width) ~ TRUE,
Petal.Width <= mean(Petal.Width) + sd(Petal.Width) ~ FALSE
)
) %>%
rowwise() %>%
mutate(big_cnt = sum(c(big_sl, big_sw, big_pl, big_pw))) %>%
arrange(desc(big_cnt))
library(DBI)
library(RSQLite)
library(dbplyr)
library(dplyr)
R.02.database <- 'R_02_homework_database.db'
drv <- dbDriver("SQLite")
# Display mode:
con <- dbConnect(drv, R.02.database, flags = SQLITE_RO)
# DBI (database interface):
dbGetQuery(con, "SELECT *
FROM flights
WHERE ReportPeriod = '01/01/2006 12:00:00 AM'")
# DBI (database interface):
dbGetQuery(con, "SELECT *
FROM flights")
# Create table with flights info:
flights <-  tbl(con, 'flights') %>%
as_tibble()
flights
# Add package lubridate to work with dates:
library(lubridate)
# Replace ReportPeriod with Date column (date format), add column Year and Month:
flights <- flights %>%  transmute(Date = mdy(substr(ReportPeriod,1,10)),
Year = year(Date),
Month = month(Date),
FlightType,
Arrival_Departure,
Domestic_International,
FlightOpsCount)
flights
# Summarize flights in Month/Year/Arrival_Departure buckets:
flights <-  flights %>% group_by(Month,Year,Arrival_Departure) %>%
summarise(Flights_Sum = sum(FlightOpsCount)) %>%
# Group by Month to calculate median (based on Flight_Sum column):
group_by(Month,Arrival_Departure) %>%
summarise(Flights_Median = median(Flights_Sum))
flights
# Change Month column format:
month.name[(flights$Month)] # Creates vector that translates number into full month name
# Assign vector to dataset, replacing numbers with month names
flights$Month <- month.name[(flights$Month)]
flights
# Create .csv file with final data (w/o row index):
write.csv(flights, 'R_02_homework.csv', row.names = F)
